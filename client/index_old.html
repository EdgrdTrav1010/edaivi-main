<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EdAiVi Studio</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>üé® EdAiVi Studio</h1>
        <p><strong>Frontend —Ä–∞–±–æ—Ç–∞–µ—Ç!</strong></p>
        
        <div class="status success">
            ‚úÖ Frontend —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω
        </div>
        
        <h3>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API:</h3>
        
        <button id="getMainDataBtn">–ü–æ–ª—É—á–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é</button>
        <button id="testLoginBtn">–¢–µ—Å—Ç –º–∞—Ä—à—Ä—É—Ç–∞ Login</button>
        <button id="testRegisterBtn">–¢–µ—Å—Ç –º–∞—Ä—à—Ä—É—Ç–∞ Register</button>
        <button id="testProfileBtn">–¢–µ—Å—Ç –º–∞—Ä—à—Ä—É—Ç–∞ Profile</button>
        
        <div id="backendData" class="data-display"></div>
        <div id="statusMessage"></div>
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
        function displayData(data, title) {
            const dataDiv = document.getElementById('backendData');
            const statusDiv = document.getElementById('statusMessage');
            
            dataDiv.style.display = 'block';
            dataDiv.innerHTML = `<strong>${title}:</strong>\n${JSON.stringify(data, null, 2)}`;
            
            statusDiv.innerHTML = '<div class="status success">‚úÖ –î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω—ã —Å backend!</div>';
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫
        function displayError(error, title) {
            const dataDiv = document.getElementById('backendData');
            const statusDiv = document.getElementById('statusMessage');
            
            dataDiv.style.display = 'block';
            dataDiv.innerHTML = `<strong>–û—à–∏–±–∫–∞ ${title}:</strong>\n${error}`;
            
            statusDiv.innerHTML = '<div class="status error">‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Å backend!</div>';
        }
        
        // –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
        document.getElementById('getMainDataBtn').onclick = async function() {
            try {
                const response = await fetch('http://localhost:3001/');
                const data = await response.json();
                displayData(data, '–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è API');
            } catch (error) {
                displayError(error.message, '–ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏');
            }
        }
        
        // –¢–µ—Å—Ç –º–∞—Ä—à—Ä—É—Ç–∞ Login
        document.getElementById('testLoginBtn').onclick = async function() {
            try {
                const response = await fetch('http://localhost:3001/api/auth/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        email: 'test@example.com',
                        password: 'testpassword'
                    })
                });
                const data = await response.json();
                displayData(data, '–û—Ç–≤–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∞ Login');
            } catch (error) {
                displayError(error.message, '–ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ Login');
            }
        }
        
        // –¢–µ—Å—Ç –º–∞—Ä—à—Ä—É—Ç–∞ Register
        document.getElementById('testRegisterBtn').onclick = async function() {
            try {
                const response = await fetch('http://localhost:3001/api/auth/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        email: 'test@example.com',
                        password: 'testpassword',
                        displayName: 'Test User'
                    })
                });
                const data = await response.json();
                displayData(data, '–û—Ç–≤–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∞ Register');
            } catch (error) {
                displayError(error.message, '–ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ Register');
            }
        }
        
        // –¢–µ—Å—Ç –º–∞—Ä—à—Ä—É—Ç–∞ Profile
        document.getElementById('testProfileBtn').onclick = async function() {
            try {
                const response = await fetch('http://localhost:3001/api/auth/profile');
                const data = await response.json();
                displayData(data, '–û—Ç–≤–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∞ Profile');
            } catch (error) {
                displayError(error.message, '–ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ Profile');
            }
        }
    </script>
</body>
</html>